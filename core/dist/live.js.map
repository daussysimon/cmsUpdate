{"version":3,"file":"live.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;ACVA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;ACNkE;AAInD,SAASI,OAAOA,CAC7BC,KAAQ,EACRC,IAAa,EACbC,YAA2C,EAC3C;EACA,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGN,4BAAQ,CAACE,KAAK,CAAC;EAEvC,MAAMK,KAAK,GAAGR,2BAAO,CAAC,MAAM;IAC1B,IAAI,OAAOS,MAAM,KAAK,WAAW,EAAE;MACjC,OAAO,KAAK;IACd;IACA,MAAMC,YAAY,GAAG,IAAIC,eAAe,CAACF,MAAM,CAACG,QAAQ,CAACC,MAAM,CAAC;IAChE,OAAOH,YAAY,CAACI,GAAG,CAAC,YAAY,CAAC,KAAK,MAAM;EAClD,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,YAAY,GAAGjB,+BAAW,CAC9B,MAAOkB,KAAmB,IAAK;IAC7B,IAAI,CAACR,KAAK,IAAI,CAACJ,IAAI,IAAIY,KAAK,CAACV,IAAI,CAACW,OAAO,KAAK,aAAa,EAAE;MAC3D;IACF;IAEA,MAAM;MAAEC,SAAS;MAAEf;IAAM,CAAC,GAAGa,KAAK,CAACV,IAAI,CAACH,KAAK;IAE7C,IAAIe,SAAS,KAAKd,IAAI,EAAE;MACtBG,OAAO,CAACF,YAAY,GAAG,MAAMA,YAAY,CAACF,KAAK,CAAC,GAAGA,KAAK,CAAC;IAC3D;EACF,CAAC,EACD,CAACK,KAAK,EAAEJ,IAAI,EAAEC,YAAY,CAC5B,CAAkD;EAElDN,6BAAS,CAAC,MAAM;IACd,IAAI,CAACS,KAAK,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;MAC3C;IACF;IAEAA,MAAM,CAACU,gBAAgB,CAAC,SAAS,EAAEJ,YAAY,CAAC;IAEhD,OAAO,MAAM;MACXN,MAAM,CAACW,mBAAmB,CAAC,SAAS,EAAEL,YAAY,CAAC;IACrD,CAAC;EACH,CAAC,EAAE,CAACP,KAAK,EAAEO,YAAY,CAAC,CAAC;EAEzB,OAAOT,IAAI,aAAJA,IAAI,cAAJA,IAAI,GAAIH,KAAK;AACtB;;AC/C0B;AAEM;AAUhC,MAAMmB,IAAmB,GAAGA,CAAC;EAAElB,IAAI;EAAED;AAAM,CAAC,KAAK;EAC/C,MAAMG,IAAI,GAAGJ,OAAO,CAACC,KAAK,EAAEC,IAAI,CAAC;EACjC,oBAAOiB,sCAAA,CAAAA,mCAAA,QAAGf,IAAO,CAAC;AACpB,CAAC;AAED,gDAAegB,IAAI;;ACjBsC","sources":["webpack://StaticCmsCoreLive/webpack/universalModuleDefinition","webpack://StaticCmsCoreLive/external umd \"react\"","webpack://StaticCmsCoreLive/webpack/bootstrap","webpack://StaticCmsCoreLive/webpack/runtime/compat get default export","webpack://StaticCmsCoreLive/webpack/runtime/define property getters","webpack://StaticCmsCoreLive/webpack/runtime/hasOwnProperty shorthand","webpack://StaticCmsCoreLive/webpack/runtime/make namespace object","webpack://StaticCmsCoreLive/./src/live/useData.tsx","webpack://StaticCmsCoreLive/./src/live/Data.tsx","webpack://StaticCmsCoreLive/./src/live/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StaticCmsCoreLive\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"StaticCmsCoreLive\"] = factory(root[\"react\"]);\n})(globalThis, (__WEBPACK_EXTERNAL_MODULE__156__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__156__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { useCallback, useEffect, useMemo, useState } from 'react';\r\n\r\nimport type { ValueOrNestedValue } from '@staticcms/core';\r\n\r\nexport default function useData<I extends ValueOrNestedValue, O extends ValueOrNestedValue>(\r\n  value: O,\r\n  path?: string,\r\n  preprocessor?: (value: I) => O | Promise<O>,\r\n) {\r\n  const [data, setData] = useState(value);\r\n\r\n  const isCms = useMemo(() => {\r\n    if (typeof window === 'undefined') {\r\n      return false;\r\n    }\r\n    const searchParams = new URLSearchParams(window.location.search);\r\n    return searchParams.get('useCmsData') === 'true';\r\n  }, []);\r\n\r\n  const onDataChange = useCallback(\r\n    async (event: MessageEvent) => {\r\n      if (!isCms || !path || event.data.message !== 'data:update') {\r\n        return;\r\n      }\r\n\r\n      const { fieldPath, value } = event.data.value;\r\n\r\n      if (fieldPath === path) {\r\n        setData(preprocessor ? await preprocessor(value) : value);\r\n      }\r\n    },\r\n    [isCms, path, preprocessor],\r\n  ) as unknown as EventListenerOrEventListenerObject;\r\n\r\n  useEffect(() => {\r\n    if (!isCms || typeof window === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('message', onDataChange);\r\n\r\n    return () => {\r\n      window.removeEventListener('message', onDataChange);\r\n    };\r\n  }, [isCms, onDataChange]);\r\n\r\n  return data ?? value;\r\n}\r\n","import React from 'react';\r\n\r\nimport useData from './useData';\r\n\r\nimport type { ValueOrNestedValue } from '@staticcms/core';\r\nimport type { FC } from 'react';\r\n\r\nexport interface DataProps {\r\n  path: string;\r\n  value: ValueOrNestedValue;\r\n}\r\n\r\nconst Data: FC<DataProps> = ({ path, value }) => {\r\n  const data = useData(value, path);\r\n  return <>{data}</>;\r\n};\r\n\r\nexport default Data;\r\n","export { default as Data, type DataProps } from './Data';\r\nexport { default as useData } from './useData';\r\n"],"names":["useCallback","useEffect","useMemo","useState","useData","value","path","preprocessor","data","setData","isCms","window","searchParams","URLSearchParams","location","search","get","onDataChange","event","message","fieldPath","addEventListener","removeEventListener","React","Data","createElement","Fragment","default"],"sourceRoot":""}